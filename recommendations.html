<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recommendations - Sleep & Productivity Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #1a2b3c;
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 340px;
            background: #f5f5f5;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 40px;
            padding: 0 10px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #5b7fd4;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .logo-text {
            font-size: 16px;
            font-weight: 600;
            color: #1a2b3c;
        }

        .nav-menu {
            list-style: none;
            flex: 1;
        }

        .nav-item {
            margin-bottom: 8px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            border-radius: 10px;
            text-decoration: none;
            color: #666;
            font-weight: 500;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav-link:hover {
            background: #e8eef7;
            color: #5b7fd4;
        }

        .nav-link.active {
            background: #d4e3f7;
            color: #5b7fd4;
        }

        .nav-icon {
            font-size: 20px;
            width: 24px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border-top: 1px solid #ddd;
            margin-top: auto;
            cursor: pointer;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #5b7fd4;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: 600;
            color: #1a2b3c;
            font-size: 14px;
        }

        .user-role {
            font-size: 12px;
            color: #999;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
        }

        .page-header {
            margin-bottom: 20px;
        }

        .page-title {
            font-size: 36px;
            font-weight: 700;
            color: white;
            margin-bottom: 8px;
        }

        .page-subtitle {
            font-size: 14px;
            color: #94a3b8;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: white;
            margin-bottom: 16px;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .insight-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .insight-header {
            font-size: 18px;
            font-weight: 700;
            color: #1a2b3c;
        }

        .insight-text {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }

        .insight-illustration {
            background: #fef3c7;
            border-radius: 12px;
            padding: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 150px;
            font-size: 64px;
        }

        .progress-habit-row {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            margin-bottom: 30px;
        }

        .progress-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
        }

        .progress-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #d1fae5;
            color: #065f46;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .progress-text {
            font-size: 14px;
            color: #333;
            line-height: 1.6;
        }

        .progress-icon {
            width: 60px;
            height: 60px;
            background: #fef3c7;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin-top: 16px;
        }

        .habit-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
        }

        .habit-title {
            font-size: 18px;
            font-weight: 700;
            color: #1a2b3c;
            margin-bottom: 16px;
        }

        .habit-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .habit-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .habit-item:hover {
            background: #e8eef7;
        }

        .habit-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #5b7fd4;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.3s;
        }

        .habit-checkbox.checked {
            background: #5b7fd4;
            color: white;
        }

        .habit-label {
            font-size: 14px;
            color: #333;
        }

        .highlight-card {
            background: white;
            border-radius: 16px;
            padding: 32px;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 32px;
            align-items: center;
        }

        .highlight-content h3 {
            font-size: 22px;
            font-weight: 700;
            color: #1a2b3c;
            margin-bottom: 12px;
        }

        .highlight-content p {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
        }

        .highlight-illustration {
            background: #fef3c7;
            border-radius: 12px;
            padding: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 72px;
        }

        @media (max-width: 1200px) {
            .insights-grid {
                grid-template-columns: 1fr;
            }

            .progress-habit-row {
                grid-template-columns: 1fr;
            }

            .highlight-card {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
            }

            .main-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <div class="logo-icon">üåô</div>
            <div class="logo-text">Sleep & Productivity Tracker</div>
        </div>

        <ul class="nav-menu">
            <li class="nav-item">
                <a class="nav-link" onclick="window.location.href='dashboard.html'">
                    <span class="nav-icon">üìä</span>
                    Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" onclick="window.location.href='sleep-analysis.html'">
                    <span class="nav-icon">üåô</span>
                    Sleep Analysis
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link active">
                    <span class="nav-icon">üí°</span>
                    Recommendations
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" onclick="window.location.href='settings.html'">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    Settings
                </a>
            </li>
        </ul>

        <div class="user-profile" onclick="window.location.href='profile.html'">
            <div class="user-avatar">üë§</div>
            <div class="user-info">
                <div class="user-name" id="profileName">Username</div>
                <div class="user-role">Profile</div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="page-header">
            <h1 class="page-title">Recommendations</h1>
            <p class="page-subtitle">Personalized tips to improve your sleep and productivity</p>
        </div>

        <h2 class="section-title">Insights</h2>
        <div class="insights-grid">
            <div class="insight-card">
                <div>
                    <div class="insight-header" id="insightTitle1">Aim for 7.5-8 hours</div>
                    <p class="insight-text" id="insightText1">Research shows that adults need 7.5-8 hours of sleep for optimal performance. Try to maintain this range for better productivity.</p>
                </div>
                <div class="insight-illustration">üò¥</div>
            </div>

            <div class="insight-card">
                <div>
                    <div class="insight-header">Consistency > total hours</div>
                    <p class="insight-text">Going to bed and waking up at the same time each day helps sync your body's natural sleep-wake cycle, leading to more restful sleep.</p>
                </div>
                <div class="insight-illustration">üïê</div>
            </div>
        </div>

        <h2 class="section-title">Progress</h2>
        <div class="progress-habit-row">
            <div class="progress-card">
                <div class="progress-badge">
                    <span>üìà</span>
                    <span id="progressStatus">Your improving</span>
                </div>
                <p class="progress-text" id="progressText">Research shows that adults need 7.5-8 hours of sleep for optimal performance. Try to maintain this range for better productivity.</p>
                <div class="progress-icon">üå±</div>
            </div>

            <div class="habit-card">
                <div class="habit-title">Habit Checklist</div>
                <div class="habit-list">
                    <div class="habit-item" onclick="toggleHabit(this)">
                        <div class="habit-checkbox"></div>
                        <span class="habit-label">Reduce caffeine after 2 PM</span>
                    </div>
                    <div class="habit-item" onclick="toggleHabit(this)">
                        <div class="habit-checkbox"></div>
                        <span class="habit-label">Set constant bedtime</span>
                    </div>
                    <div class="habit-item" onclick="toggleHabit(this)">
                        <div class="habit-checkbox checked">‚úì</div>
                        <span class="habit-label">Limit screen time before bed</span>
                    </div>
                </div>
            </div>
        </div>

        <h2 class="section-title">Highlight</h2>
        <div class="highlight-card">
            <div class="highlight-content">
                <h3 id="highlightTitle">Your most productive day was wednesday with 8 hours of sleep</h3>
                <p id="highlightText">This suggests a strong correlation between your sleep duration and productivity. On days you get a full 8 hours, your output soars.</p>
            </div>
            <div class="highlight-illustration">üìö</div>
        </div>
    </div>

    <script>
        function toggleHabit(element) {
            const checkbox = element.querySelector('.habit-checkbox');
            if (checkbox.classList.contains('checked')) {
                checkbox.classList.remove('checked');
                checkbox.textContent = '';
            } else {
                checkbox.classList.add('checked');
                checkbox.textContent = '‚úì';
            }
        }

        function loadState() {
            const saved = localStorage.getItem('sleepTrackerState');
            if (saved) {
                return JSON.parse(saved);
            }
            return { energy: 70, focus: 60, sleepDebt: 0, history: [] };
        }

        function updateRecommendations() {
            const state = loadState();
            
            const profile = localStorage.getItem('sleepTrackerProfile');
            if (profile) {
                const profileData = JSON.parse(profile);
                document.getElementById('profileName').textContent = profileData.name || 'Username';
            }

            if (state.history.length === 0) {
                document.getElementById('insightTitle1').textContent = 'Start tracking your sleep';
                document.getElementById('insightText1').textContent = 'Log your daily sleep hours to receive personalized insights and recommendations based on your patterns.';
                document.getElementById('progressStatus').textContent = 'Get Started';
                document.getElementById('progressText').textContent = 'Begin logging your sleep data to track your progress and receive personalized recommendations.';
                document.getElementById('highlightTitle').textContent = 'No data yet';
                document.getElementById('highlightText').textContent = 'Start tracking your sleep to see highlights and achievements.';
                return;
            }

            // Calculate average sleep
            const avgSleep = state.history.reduce((sum, h) => sum + h.hours, 0) / state.history.length;

            // Update first insight based on average sleep
            if (avgSleep < 7) {
                document.getElementById('insightTitle1').textContent = `Aim for 7.5-8 hours (currently ${avgSleep.toFixed(1)}h)`;
                document.getElementById('insightText1').textContent = `You're averaging ${avgSleep.toFixed(1)} hours per night. Research shows adults need 7.5-8 hours for optimal performance. Try increasing by 30 minutes.`;
            } else if (avgSleep >= 7 && avgSleep < 8) {
                document.getElementById('insightTitle1').textContent = 'Great! Keep it up';
                document.getElementById('insightText1').textContent = `You're averaging ${avgSleep.toFixed(1)} hours per night, which is in the optimal range. Maintain this consistency for continued productivity.`;
            } else {
                document.getElementById('insightTitle1').textContent = 'Excellent sleep duration!';
                document.getElementById('insightText1').textContent = `You're averaging ${avgSleep.toFixed(1)} hours per night. This is ideal for most adults. Focus on maintaining sleep quality and consistency.`;
            }

            // Update progress status
            if (state.history.length >= 2) {
                const recentAvg = (state.history[0].hours + state.history[1].hours) / 2;
                const olderAvg = state.history.length > 3 
                    ? state.history.slice(2).reduce((sum, h) => sum + h.hours, 0) / (state.history.length - 2)
                    : avgSleep;

                if (recentAvg > olderAvg + 0.3) {
                    document.getElementById('progressStatus').textContent = "You're improving";
                    document.getElementById('progressText').textContent = `Your recent sleep average (${recentAvg.toFixed(1)}h) is higher than before. This improvement should boost your energy and focus levels. Keep it up!`;
                } else if (recentAvg < olderAvg - 0.3) {
                    document.getElementById('progressStatus').textContent = "Needs attention";
                    document.getElementById('progressText').textContent = `Your sleep duration has decreased recently. Try to identify what changed and get back to your ${olderAvg.toFixed(1)}h average.`;
                } else {
                    document.getElementById('progressStatus').textContent = "Staying consistent";
                    document.getElementById('progressText').textContent = `You're maintaining a consistent sleep pattern of around ${avgSleep.toFixed(1)} hours. Consistency is key for quality rest and productivity.`;
                }
            }

            // Update highlight - find best day
            if (state.history.length > 0) {
                const bestDay = state.history.reduce((best, current) => 
                    current.energy > best.energy ? current : best
                );
                
                const dayName = bestDay.day || new Date(bestDay.date).toLocaleDateString('en-US', { weekday: 'long' });
                
                document.getElementById('highlightTitle').textContent = 
                    `Your most productive day was ${dayName} with ${bestDay.hours} hours of sleep`;
                document.getElementById('highlightText').textContent = 
                    `This suggests a strong correlation between your sleep duration and productivity. On days you get ${bestDay.hours >= 7.5 ? 'a full' : 'around'} ${bestDay.hours} hours, your output soars.`;
            }
        }

        const allHabits = [
  "Reduce caffeine after 2 PM",
  "Set a consistent bedtime",
  "Avoid long naps during the day",
  "Keep your room dark and cool",
  "Try reading before bed instead of scrolling",
  "Avoid heavy meals before sleeping",
  "Wake up at the same time daily",
  "Stretch or meditate before bed",
  "Limit screen time before bed",
  "Drink water earlier, not right before bed"
];

function generateRandomHabits() {
  const habitList = document.querySelector(".habit-list");
  if (!habitList) return;

  // Pick 3 random habits
  const shuffled = allHabits.sort(() => 0.5 - Math.random());
  const selected = shuffled.slice(0, 3);

  habitList.innerHTML = selected.map(habit => `
    <div class="habit-item" onclick="toggleHabit(this)">
      <div class="habit-checkbox"></div>
      <span class="habit-label">${habit}</span>
    </div>
  `).join("");
}

// Toggle checkmarks
function toggleHabit(el) {
  const checkbox = el.querySelector(".habit-checkbox");
  checkbox.classList.toggle("checked");
  checkbox.textContent = checkbox.classList.contains("checked") ? "‚úì" : "";
}

// Call on page load
generateRandomHabits();

        updateRecommendations();
    </script>
</body>
</html>
